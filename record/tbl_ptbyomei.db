tbl_ptbyomei {
	HOSPID				char(24);
	PTID				number(10);
	SRYKA				char(2);
	SRYYMD				char(8);
	RENNUM  			number(2);
	KHNBYOMEICD			char(7);
	BYOMEIINPUTCD		varchar(20);
	BYOMEICDSU			number(1);
	BYOMEICD_1			char(7);
	BYOMEICD_2			char(7);
	BYOMEICD_3 			char(7);
	BYOMEICD_4			char(7);
	BYOMEICD_5			char(7);
	BYOMEICD_6			char(7);
	UTAGAIFLG           char(1);
	SYUBYOFLG   		char(1);
	MANSEIKBN  			number(2);
	NYUGAIKBN			char(1);
	HKNCOMBI       		number(4);
	REZEFLG        		char(1);
	REZEMM         		number(2);
	TENKIKBN       		char(1);
	TENKIYMD       		char(8);
	BYOMEI         		varchar(160);
	BYOMEIMOJI     		number(2);
	CHARTBYOMEI        	varchar(160);
	CHARTBYOMEIMOJI    	number(2);
	BYOMEIHENFLG		char(1);
	HKNBYOMEIFLG		char(1);
	TERMID  			varchar(16);
	OPID    			varchar(16);
	CREYMD  			char(8);
	UPYMD    			char(8);
	UPHMS				char(6);
};
primary	{
	HOSPID,PTID,SRYKA,SRYYMD,RENNUM;
};


path	key		{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   SRYKA       =   :SRYKA 
			AND   SRYYMD      =   :SRYYMD
			AND   RENNUM      =   :RENNUM
		;
	};
};

path	key2	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key2_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   SRYKA       =   :SRYKA
			ORDER BY SRYYMD,RENNUM 
		;
	};
};

path	key3	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key3_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			ORDER  BY  PTID,SRYYMD,SRYKA
		;
	};
};

path	key4	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key4_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			ORDER  BY  PTID,SRYYMD,SRYKA
		;
	};
};

path	key5	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key5_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   SRYKA       =   :SRYKA
			AND ((BYOMEICD_1  =   :BYOMEICD_1)
			 OR  (BYOMEICD_2  =   :BYOMEICD_2)
			 OR  (BYOMEICD_3  =   :BYOMEICD_3)
			 OR  (BYOMEICD_4  =   :BYOMEICD_4)
			 OR  (BYOMEICD_5  =   :BYOMEICD_5)
			 OR  (BYOMEICD_6  =   :BYOMEICD_6))
		;
	};
};

path	key6	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key6_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			ORDER  BY  SRYYMD DESC,SRYKA,RENNUM
		;
	};
};

path	key7		{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key7_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   SRYKA       =   :SRYKA 
			AND   SRYYMD      =   :SRYYMD
			ORDER  BY  RENNUM DESC
		;
	};
};

path	key8		{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key8_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   HKNCOMBI    =   :HKNCOMBI
			ORDER  BY  SRYKA,
                                   SRYYMD
		;
	};
};

path	key9		{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key9_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   SRYYMD      <   :SRYYMD
			AND  ((TENKIKBN    =   :TENKIKBN )
                          OR (TENKIYMD    =
                           (SELECT MAX(TENKIYMD)
                                   FROM tbl_ptbyomei 
                               	WHERE   HOSPID    =   :HOSPID
		        	AND   PTID        =   :PTID
                                AND   SRYYMD      <   :SRYYMD
                                AND   TENKIKBN    =   '1'
                                AND   TENKIYMD    <=  :TENKIYMD ))
                          OR (TENKIYMD    =
                           (SELECT MAX(TENKIYMD)
                                   FROM tbl_ptbyomei 
                               	WHERE   HOSPID    =   :HOSPID
		        	AND   PTID        =   :PTID
                                AND   SRYYMD      <   :SRYYMD
                                AND   TENKIKBN    =   '3'
                                AND   TENKIYMD    <=  :TENKIYMD ))) 
			ORDER  BY  TENKIKBN DESC,
                                   SRYYMD
		;
	};
};

path	key10	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key10_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   SRYKA       =   :SRYKA
			AND   SRYYMD      <=  :SRYYMD
                        AND   MANSEIKBN  <>   :MANSEIKBN
			AND  (TENKIKBN    =   :TENKIKBN  OR
                              TENKIYMD    >   :SRYYMD)
			ORDER BY SRYYMD,RENNUM 
		;
	};
};

path	key11	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key11_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   SRYYMD      <   :SRYYMD
			AND   NYUGAIKBN   IN (' ',:NYUGAIKBN)
			AND  (TENKIKBN    =   :TENKIKBN  OR
                  TENKIYMD    >=  :TENKIYMD)
			ORDER BY SRYKA,SYUBYOFLG DESC,SRYYMD,RENNUM
		;
	};
};

path	key12	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key12_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND     PTID      =   :PTID
            AND     SRYYMD    <=  :SRYYMD
			AND     HKNCOMBI  =   :HKNCOMBI
            AND     REZEFLG   <>  '1'
			ORDER  BY  SRYYMD,BYOMEI,TENKIKBN DESC,TENKIYMD DESC,SYUBYOFLG DESC
		;
	};
};

path	del11	{ 	
	DBDELETE	{
		DELETE
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND   SRYKA       =   :SRYKA 
		;
	};
};
path	del21	{ 	
	DBDELETE	{
		DELETE
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
		;
	};
};
path	all	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_all_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
 		;
	};
};
path	all2	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_all2_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   SRYYMD    LIKE   :SRYYMD
		;
	};
};

path	key13	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key13_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND     PTID      =   :PTID
			AND     SRYKA     =   :SRYKA
			AND     BYOMEI    =   :BYOMEI
		;
	};
};
path	key14	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key14_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND     SRYKA     =   :SRYKA
			AND     SYUBYOFLG =   '1'
		;
	};
};

path	key15	{ 	
	DBSELECT	{
		DECLARE tbl_ptbyomei_key15_csr CURSOR FOR
		SELECT *
		FROM tbl_ptbyomei
			WHERE   HOSPID    =   :HOSPID
			AND   PTID        =   :PTID
			AND     SYUBYOFLG =   '1'
		;
	};
};
