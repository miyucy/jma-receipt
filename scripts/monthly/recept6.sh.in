#!/bin/bash

if test -z "$JMARECEIPT_ENV" ; then
    JMARECEIPT_ENV="@jma-receipt-env@"
fi
if ! test -f "$JMARECEIPT_ENV"; then
    exit 0
fi

. $JMARECEIPT_ENV
#-------------------------------------------#
#    労災請求書用ファイル作成
#        CPCOMMONSHELL1.INC  
#        $1 SRYYM TERID SYSYMD
#        $2 SYOKBN
#           1:一括作成  2:個別作成
#        $3 RECEKBN
#           3:全体  
#        $4 エラーファイル名 
#        $5 JOBID 
#        $6 SHELLID
#        $7 県単用項目編集プログラム名（医保用）
#        $8 処理年月
#        $9  作成年月日
#        $10 作成時間
#        $14 コメント記載記載区分
#        $15 枠記載区分
#        $16 HOSPNUM 
#        $17 様式区分
#        $18 レセプト作成区分
#            1:提出用レセ、2:点検用レセ
#-------------------------------------------#
##      エラーファイル削除
	echo $#
	echo "echo " $4
        if  [ -e $4 ]; then
            rm  $4
        fi

        rm  -f /home/orca/recept6.log
        
        rm  -f  /var/tmp/RECE4*
        rm  -f  /var/tmp/RECEYMD*
        rm  -f  /tmp/${16}00RECE4*
        rm  -f  /tmp/${16}00RECEYMD*

        if [ ${2} -eq  '1' ]; then
           LOG_FILE="/var/log/jma-receipt/${16}recept6a.log"
        else
           LOG_FILE="/var/log/jma-receipt/${16}recept6b.log"
        fi
        
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0400 -parameter $1$2$3$5$6,${17},${16},${4}    > $LOG_FILE 2>&1

        if  [ -e $4 ]; then
            exit  
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0410 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi 

        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0420 -parameter $1$3$5$6,${17},${18},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0425 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0428 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0430 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0435 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

 
        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0440 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
           exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0450 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi
 
        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0460 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0465 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0466 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
            exit 
        else 
	$DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0470 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1

        fi

        if  [ -e $4 ]; then
            exit 
        else 
        $DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0468 -parameter $1$3$5$6,${17},${16},${4}      >> $LOG_FILE 2>&1
        fi

        if  [ -e $4 ]; then
            exit 
        else 
           $DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0480 -parameter $9${10}$1$2$3$8$5$6,${14},${15},${18},${16},${4}    >> $LOG_FILE 2>&1
        fi
        
        if  [ -e $4 ]; then
            exit 
        else 
       	    $DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0481 -parameter $9${10}$1$2$3$8$5$6,${14},${15},${18},${16},${4}    >> $LOG_FILE 2>&1
        fi
            

        if  [ -e $4 ]; then
            exit 
        else 
       	    $DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0482 -parameter $9${10}$1$2$3$8$5$6,${14},${15},${18},${16},${4}    >> $LOG_FILE 2>&1
        fi

        if  [ -e $4 ]; then
            exit 
        else 
       	    $DBSTUB -dir $LDDIRECTORY -bd orcabt ORCR0483 -parameter $9${10}$1$2$3$8$5$6,${18},${16},${4}    >> $LOG_FILE 2>&1
        fi
     
        if  [ -e $4 ]; then
            exit 
        else
	    $DBSTUB -dir $LDDIRECTORY -bd orcabt ORCBJOB -parameter JBE$5$6,${16}       >> $LOG_FILE 2>&1

            rm  -f  /tmp/${16}00RECE4*
            rm  -f  /tmp/${16}00RECEYMD*
	fi
	
        exit 
